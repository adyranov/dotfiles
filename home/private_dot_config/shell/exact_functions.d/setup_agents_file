setup_agents_file() {
  local root="${1:-.}"
  local canonical="$root/AGENTS.md"

  [ -f "$canonical" ] || echo "# Repository Guidelines" > "$canonical"

  for f in \
    "$root/CLAUDE.md" \
    "$root/GEMINI.md" \
    "$root/.clinerules" \
    "$root/.cursor/rules" \
    "$root/.github/copilot-instructions.md"
  do
    mkdir -p "$(dirname "$f")"
    [ -e "$f" ] || ln -s "$(realpath --relative-to="$(dirname "$f")" "$canonical")" "$f"
  done
}
