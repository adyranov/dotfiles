{{- $excludeFlag := "no-brew" }}
{{- if (eq .chezmoi.os "linux") }}
{{- if (eq .chezmoi.osRelease.id "ubuntu") }}
{{- $excludeFlag = "no-apt" }}
{{- end }}
{{- if (eq .chezmoi.osRelease.id "alpine") }}
{{- $excludeFlag = "no-apk" }}
{{- end }}
{{- end }}
{{- range $package := .packages }}
{{- if and (contains "asdf" $package) (contains $excludeFlag $package)  }}
{{- $nameVer := regexReplaceAll "(\\w+) \\[.*asdf:(.*):(.*)\\]$" $package "${1} ${2} ${3}" }}
{{- $nameVer = regexSplit " " $nameVer -1 }}
{{- $packageName := first $nameVer | trim }}
{{- $asdfName := first (rest $nameVer) | trim | default $packageName}}
{{- $asdfVersion := last $nameVer | trim }}
{{- $asdfName }} {{ $asdfVersion }}
{{ end }}
{{- end -}}
